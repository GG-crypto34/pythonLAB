<!DOCTYPE html>
<html>
<head>
    <title>Users</title>
</head>
<body>

<h2>User list</h2>

<form action="/users/add" method="post">
    <input name="name" placeholder="User name" required>
    <button>Add</button>
</form>

<hr>

<ul>
{% for user in users %}
    <li>
        <b>{{ user.name }}</b>
        <br>
        Total expenses:
        {{ user.expenses | sum(attribute='amount') }}

        <br>
        <a href="/users/{{ user.id }}/expenses">View expenses</a>

        <form action="/users/edit/{{ user.id }}" method="post">
            <input name="name" value="{{ user.name }}">
            <button>Edit</button>
        </form>

        <a href="/users/delete/{{ user.id }}">Delete</a>
    </li>
{% endfor %}
</ul>

</body>
</html>